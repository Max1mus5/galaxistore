{% extends 'store/main.html' %}
{% load static %}
{% block content %}

<div class="dashboardContainer">
  <div class="dashboardHeader">Inicio>Ropa</div>
  <div class="productContainer">
    {% for producto in productos %}
      <div class="product">
        <div class="productImg">
          <img id="productIMG" src="{% static  producto.imagen %}" alt="{{ producto.nombre }}" />
        </div>
        <div class="productName">{{ producto.nombre }}</div>
        <div class="productBuyDetails">
          <div class="productPrice">${{ producto.precio }}</div>
          <div class="productAddCar">
            <button data-product="{{product.id}}" data-action="add" class="button-add update-cart" class="button-add update-cart addCartButton" data-producto-id="{{ producto.id }}"> <span class="material-symbols-outlined navbarTagsUserIcon">
              shopping_cart
              </span> </button>
        </div>
        </div>
      </div>
    {% endfor %}
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      var addCartButtons = document.querySelectorAll(".addCartButton");
      
      addCartButtons.forEach(function(button) {
        button.addEventListener("click", function() {
          var productId = this.getAttribute("data-producto-id");
          var cartItems = JSON.parse(localStorage.getItem("cartItems")) || {}; 
          if (!cartItems[productId]) {
            cartItems[productId] = 0; 
          }
          cartItems[productId]++; 
          localStorage.setItem("cartItems", JSON.stringify(cartItems)); 
          console.log("Producto agregado al carrito con ID: " + productId);
        });
      });
    });
    </script>
    
    
</div>

{% endblock content %}